<LetterViewer letter="state.letter" letterId="props.letterId" loading="state.loading" smallLoading="state.saveLoading and state.internalLoading !== true">
  <!-- action bar buttons -->
  <t t-set-slot="action-buttons" t-slot-scope="buttons">
    <Button color="'red'" level="'secondary'" icon="'triangle-exclamation'" onClick="() => state.signalProblemModal = true" size="'sm'">Signal a Problem</Button>
    <Button color="'green'" onClick="() => this.save()" icon="'floppy-disk'" level="'secondary'" size="'sm'">Save</Button>
    <Button color="'compassion'" onClick="() => this.submit()" icon="'paper-plane'" size="'sm'">Submit</Button>
  </t>

  <!-- signal problem modal in unsafe slot (no letter) -->
  <t t-set-slot="unsafe">
    <SignalProblem active="state.signalProblemModal" letterId="props.letterId" onClose="() => state.signalProblemModal = false" />
  </t>

  <!-- loader for letter loading -->
  <t t-set-slot="right-pane">
    <BlurLoader active="state.internalLoading" />
  </t>

  <t t-set-slot="content" t-slot-scope="scope">
    <LetterSubmittedModal active="state.letterSubmitted" letter="scope.letter" />
    <ContentEditor letter="scope.letter" contentRetriever="(cb) => this.contentGetter = cb" />
  </t>
</LetterViewer>